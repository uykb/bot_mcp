# Bybit V5 API MCP服务使用指南

## 环境配置

在使用Bybit V5 API MCP服务前，请确保已正确配置以下环境：

1. 设置API密钥环境变量：

```bash
# Windows
set BYBIT_API_KEY=您的API密钥
set BYBIT_API_SECRET=您的API密钥密文

# Linux/MacOS
export BYBIT_API_KEY=您的API密钥
export BYBIT_API_SECRET=您的API密钥密文
```

2. 确保已安装所有依赖：

```bash
go mod tidy
```

## 示例客户端

本目录包含以下示例客户端，展示了如何使用Bybit V5 API MCP服务的各个功能：

1. **market_client.go** - 市场数据API示例
   - 获取K线数据
   - 获取订单簿
   - 获取行情数据
   - 获取交易对信息

2. **order_client.go** - 订单管理API示例
   - 查询账户余额
   - 创建限价订单
   - 查询订单状态
   - 修改订单
   - 取消订单

## 运行示例

```bash
# 运行市场数据示例
go run market_client.go

# 运行订单管理示例
go run order_client.go
```

## API模块说明

Bybit V5 API MCP服务实现了以下核心模块：

1. **市场数据 (Market)**
   - K线图数据查询
   - 订单簿深度查询
   - 行情数据查询
   - 交易对信息查询

2. **订单管理 (Order)**
   - 创建订单（市价单、限价单等）
   - 修改订单
   - 取消订单
   - 查询订单状态

3. **仓位管理 (Position)**
   - 查询仓位
   - 设置杠杆
   - 设置止盈止损
   - 切换持仓模式

4. **账户管理 (Account)**
   - 查询钱包余额
   - 查询手续费率
   - 查询账户信息
   - 设置保证金模式

5. **资产管理 (Asset)**
   - 查询币种余额
   - 资产划转
   - 查询划转历史
   - 提现操作

## 注意事项

1. 在生产环境中使用时，请妥善保管API密钥，避免泄露。
2. 建议在测试环境中充分测试后再在生产环境使用。
3. 请注意API调用频率限制，避免触发Bybit的频率限制机制。
4. 对于订单操作，请确保账户有足够的资金，并注意风险控制。

## 错误处理

服务内置了完善的错误处理机制，常见错误码包括：

- 10001: 无效参数
- 10002: 无效签名
- 10003: 认证失败
- 10004: 超过频率限制
- 20001: API请求失败
- 30001: 下单失败
- 30004: 余额不足

详细错误码请参考 `pkg/errors/errors.go` 文件。